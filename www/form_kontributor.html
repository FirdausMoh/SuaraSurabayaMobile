<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Form Kontributor</title>
    <link rel="stylesheet" href="./css/form.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div id="header-container"></div>
    <!-- Tombol Back -->
    <div class="back-button-container">
      <button class="back-button" onclick="goBack()">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
        >
          <path
            d="M17.77 3.77L16 2L6 12L16 22L17.77 20.23L9.54 12L17.77 3.77Z"
            fill="#1DA1F2"
          />
        </svg>
      </button>
    </div>
    <!-- Form Container -->
    <div class="form-container">
      <div class="user-info">
        <img src="img/profile.webp" alt="Profile" class="profile-img" />
        <span class="user-name">Bambang</span>
      </div>
      <textarea
        class="textarea"
        placeholder="Apa Yang Ingin Anda Bagikan?"
        id="userInput"
      ></textarea>

      <div class="actions">
        <button class="camera-button" onclick="capturePhoto()" style="background: none; border: none;color: #EEEFF7; text-align: center; font-family: Poppins; font-size: 12px; font-style: normal; font-weight: 500; line-height: normal; letter-spacing: 0.06px; text-transform: capitalize;">
          <I><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none">
            <path d="M14 3.5V12.5C14 13.3281 13.4121 14 12.6875 14H1.3125C0.587891 14 0 13.3281 0 12.5V3.5C0 2.67188 0.587891 2 1.3125 2H3.71875L4.05508 0.971875C4.24648 0.3875 4.73594 0 5.28281 0H8.71445C9.26133 0 9.75078 0.3875 9.94219 0.971875L10.2812 2H12.6875C13.4121 2 14 2.67188 14 3.5ZM10.2812 8C10.2812 5.93125 8.81016 4.25 7 4.25C5.18984 4.25 3.71875 5.93125 3.71875 8C3.71875 10.0688 5.18984 11.75 7 11.75C8.81016 11.75 10.2812 10.0688 10.2812 8ZM9.40625 8C9.40625 9.51562 8.32617 10.75 7 10.75C5.67383 10.75 4.59375 9.51562 4.59375 8C4.59375 6.48438 5.67383 5.25 7 5.25C8.32617 5.25 9.40625 6.48438 9.40625 8Z" fill="#B6E9FF"/>
          </svg></I>
          Ambil Foto
        </button>
        <button class="album-button" onclick="choosePhoto()" style="background: none; border: none;color: #EEEFF7; text-align: center; font-family: Poppins; font-size: 12px; font-style: normal; font-weight: 500; line-height: normal; letter-spacing: 0.06px; text-transform: capitalize;"><i><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none">
          <path d="M13.3 0H3.5C3.31435 0 3.1363 0.0921872 3.00503 0.256282C2.87375 0.420376 2.8 0.642936 2.8 0.875V3.5H6.3V1.75H10.5V10.5H13.3C13.4857 10.5 13.6637 10.4078 13.795 10.2437C13.9263 10.0796 14 9.85706 14 9.625V0.875C14 0.642936 13.9263 0.420376 13.795 0.256282C13.6637 0.0921872 13.4857 0 13.3 0ZM5.075 2.81641C5.075 2.88167 5.05426 2.94427 5.01734 2.99042C4.98042 3.03657 4.93034 3.0625 4.87812 3.0625H4.22187C4.16966 3.0625 4.11958 3.03657 4.08266 2.99042C4.04574 2.94427 4.025 2.88167 4.025 2.81641V1.99609C4.025 1.93083 4.04574 1.86823 4.08266 1.82208C4.11958 1.77593 4.16966 1.75 4.22187 1.75H4.87812C4.93034 1.75 4.98042 1.77593 5.01734 1.82208C5.05426 1.86823 5.075 1.93083 5.075 1.99609V2.81641ZM12.775 8.50391C12.775 8.56917 12.7543 8.63177 12.7173 8.67792C12.6804 8.72407 12.6303 8.75 12.5781 8.75H11.9219C11.8697 8.75 11.8196 8.72407 11.7827 8.67792C11.7457 8.63177 11.725 8.56917 11.725 8.50391V7.68359C11.725 7.61833 11.7457 7.55573 11.7827 7.50958C11.8196 7.46343 11.8697 7.4375 11.9219 7.4375H12.5781C12.6303 7.4375 12.6804 7.46343 12.7173 7.50958C12.7543 7.55573 12.775 7.61833 12.775 7.68359V8.50391ZM12.775 5.66016C12.775 5.72542 12.7543 5.78802 12.7173 5.83417C12.6804 5.88032 12.6303 5.90625 12.5781 5.90625H11.9219C11.8697 5.90625 11.8196 5.88032 11.7827 5.83417C11.7457 5.78802 11.725 5.72542 11.725 5.66016V4.83984C11.725 4.77458 11.7457 4.71198 11.7827 4.66583C11.8196 4.61968 11.8697 4.59375 11.9219 4.59375H12.5781C12.6303 4.59375 12.6804 4.61968 12.7173 4.66583C12.7543 4.71198 12.775 4.77458 12.775 4.83984V5.66016ZM12.775 2.81641C12.775 2.88167 12.7543 2.94427 12.7173 2.99042C12.6804 3.03657 12.6303 3.0625 12.5781 3.0625H11.9219C11.8697 3.0625 11.8196 3.03657 11.7827 2.99042C11.7457 2.94427 11.725 2.88167 11.725 2.81641V1.99609C11.725 1.93083 11.7457 1.86823 11.7827 1.82208C11.8196 1.77593 11.8697 1.75 11.9219 1.75H12.5781C12.6303 1.75 12.6804 1.77593 12.7173 1.82208C12.7543 1.86823 12.775 1.93083 12.775 1.99609V2.81641ZM9.1 4.375H0.7C0.514348 4.375 0.336301 4.46719 0.205025 4.63128C0.0737498 4.79538 0 5.01794 0 5.25L0 13.125C0 13.3571 0.0737498 13.5796 0.205025 13.7437C0.336301 13.9078 0.514348 14 0.7 14H9.1C9.28565 14 9.4637 13.9078 9.59497 13.7437C9.72625 13.5796 9.8 13.3571 9.8 13.125V5.25C9.8 5.01794 9.72625 4.79538 9.59497 4.63128C9.4637 4.46719 9.28565 4.375 9.1 4.375ZM2.1 6.125C2.23845 6.125 2.37378 6.17632 2.4889 6.27246C2.60401 6.36861 2.69373 6.50527 2.74672 6.66515C2.7997 6.82504 2.81356 7.00097 2.78655 7.1707C2.75954 7.34044 2.69287 7.49635 2.59497 7.61872C2.49708 7.74109 2.37235 7.82443 2.23656 7.85819C2.10078 7.89195 1.96003 7.87462 1.83212 7.80839C1.70421 7.74217 1.59489 7.63002 1.51797 7.48612C1.44105 7.34223 1.4 7.17306 1.4 7C1.4 6.76794 1.47375 6.54538 1.60503 6.38128C1.7363 6.21719 1.91435 6.125 2.1 6.125ZM8.4 12.25H1.4V11.375L2.8 9.625L3.5 10.5L6.3 7L8.4 9.625V12.25Z" fill="#274BB4"/>
        </svg></i>Pilih Foto</button>
        <button class="location-button" onclick="addLocation()" style="background: none; border: none;color: #EEEFF7; text-align: center; font-family: Poppins; font-size: 12px; font-style: normal; font-weight: 500; line-height: normal; letter-spacing: 0.06px; text-transform: capitalize;"><i><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none">
          <g clip-path="url(#clip0_659_19434)">
            <path d="M6.46045 13.7175C2.48746 7.95788 1.75 7.36676 1.75 5.25C1.75 2.3505 4.1005 0 7 0C9.8995 0 12.25 2.3505 12.25 5.25C12.25 7.36676 11.5125 7.95788 7.53955 13.7175C7.27882 14.0942 6.72115 14.0941 6.46045 13.7175ZM7 7.4375C8.20813 7.4375 9.1875 6.45813 9.1875 5.25C9.1875 4.04187 8.20813 3.0625 7 3.0625C5.79187 3.0625 4.8125 4.04187 4.8125 5.25C4.8125 6.45813 5.79187 7.4375 7 7.4375Z" fill="#30D836"/>
          </g>
          <defs>
            <clipPath id="clip0_659_19434">
              <rect width="14" height="14" fill="white"/>
            </clipPath>
          </defs>
        </svg></i>Lokasi</button>
      </div>

      <div class="preview-container" id="previewContainer"></div>

      <button class="submit-button" onclick="submitPost()"> <i></i>Bagikan</button>
    </div>

<!-- Loading Overlay -->
    <div class="loading-overlay" id="loading">
        <div class="loading-spinner"></div>
        <p class="loading-text">Tunggu</p>
    </div>

<!-- Popup Success Message -->
<div id="popupOverlay" class="popup-overlay"></div>
<div id="successPopup" class="popup">
    <div class="popup-header">
        <div class="check-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 80 81" fill="none">
                <circle cx="40" cy="40.5" r="35" fill="#1BA354" style="stroke-width: 3px;
                stroke: #EEEFF7;"/>
                <path d="M34 50L26 42L28.5 39.5L34 45L51.5 27.5L54 30L34 50Z" fill="white" />
            </svg>
        </div>
    </div>
    <div class="popup-body">
        <p class="message">Berhasil Terkirim</p>
        <button class="close-button" onclick="closePopup()">Kembali</button>
    </div>
</div>

    <script>
      fetch("header.html")
        .then((response) => response.text())
        .then((data) => {
          document.getElementById("header-container").innerHTML = data;
        })
        .catch((error) => console.error("Error loading header:", error));
      function goBack() {
        if (window.history.length > 1) {
          window.history.back();
        } else {
          window.location.href = "index.html";
        }
      }
      let selectedImage = "";

      function capturePhoto() {
        alert("Fungsi untuk mengambil foto dari kamera.");
      }

      function choosePhoto() {
        const input = document.createElement("input");
        input.type = "file";
        input.accept = "image/*";
        input.onchange = (e) => {
          const file = e.target.files[0];
          const reader = new FileReader();
          reader.onload = (event) => {
            selectedImage = event.target.result;
            document.getElementById(
              "previewContainer"
            ).innerHTML = `<img src="${selectedImage}" alt="Preview" />`;
          };
          reader.readAsDataURL(file);
        };
        input.click();
      }

      function addLocation() {
        alert("Fungsi untuk menambahkan lokasi.");
      }

      function submitPost() {
  const text = document.getElementById("userInput").value;
  if (!text && !selectedImage) {
    alert("Harap masukkan teks atau unggah gambar.");
    return;
  }

  // Show loading spinner
  const loading = document.getElementById("loading");
  const successPopup = document.getElementById("successPopup");

  loading.classList.add("active");  // Activate loading spinner

  setTimeout(() => {
    // Hide loading spinner and show success popup
    loading.classList.remove("active");
    successPopup.classList.add("active");
  }, 2000);  // Simulate a 2 second delay for submission
}

function closePopup() {
  const successPopup = document.getElementById("successPopup");
  successPopup.classList.remove("active");
  window.location.href = "kontributor.html";  // Navigate to the main kontributor page
}

    </script>
  </body>
</html>
